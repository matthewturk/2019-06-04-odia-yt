<!-- .slide: class="titleslide" -->

# yt: hard questions
<div style="height: 6.0em;"></div>
## Matthew Turk
## Open Digital Infrastructure for Astrophysics
<p style="text-align: right;">`mjturk@illinois.edu`</p> 

---

## Thanks!

Thanks for having me here.

<p class="fragment">
I'm going to start out with some faux-controversial assertions.
</p>

<p class="fragment">
Also, I wrote up a "<a href="https://medium.com/@matthewturk/10-years-of-yt-c93b2f1cef8c">10 years of yt</a>" post two years ago that covers some of the history.
</p>

---

## Assertion 1

**Academic identity is already messed up, and the "marketplace" of projects only worsens it.**

---

## Assertion 2

**Seeking "sustainability" is an inescapably existential problem.**

---

## Our Prompt

In preparation for this event, we were presented a list of 17 questions to
frame our thoughts while guiding our talks.  I collapsed these questions into a
few bullets:

 * "What does your 'instrument' do, who does that thing with it, how do you know they do that thing with it, what other things do they do that you don't know that they do with it?"
 * "Who is in your community? Who develops it? How do you 'attract' and 'retain' them?"
 * "How do you get money? What's the funding profile?"
 * "What does 'sustainability' mean to you?"
 * "What does the future hold?"

---

## Let's get *this* one out of the way

 > "Will your instrument be widely used by your community in 10, 20, 40 years?"

<p class="fragment">
Let's say my Grandfather gave me an axe, and I use that axe my entire life.
</p>

<p class="fragment">
But, sometimes that axes needs a new handle.  So, I replace it.
</p>

<p class="fragment">
And, sometimes the blade wears out.  So, I replace that, too.
</p>

<p class="fragment">
Is it still the same axe that my Grandfather gave me?
</p>

---

## Let's get *this* one out of the way

 > "Will your instrument be widely used by your community in 10, 20, 40 years?"

<p>
"But, Matt," you say, "that's a stupid analogy."
</p>

<p class="fragment">
"Simulation analysis platforms aren't axes.  They're more like cameras."
</p>

<p class="fragment">
"Good point!" I reply, and then I'm quick to add, "Plus, my grandfather actually *did* leave me a camera!"
</p>

<p class="fragment">
For a while, I used the lenses from the old Nikon camera he passed down. But as time went on, I stopped using them, one by one.
</p>

---

The experience of using those lenses changed me, and it changed how I think
about photography.  *That* is the bigger picture (haha get it) for how I want
to frame this discussion.

---

## What is `yt`?

<div class="multiCol">
  <div class="col">
    <img src="images/yt_logo.svg"/>
  </div>
  <div class="col">
  <div class="appearing_row">
    <p class="fragment">
        `yt` is a boundary object, between data and semantics.
    </p>
    <p class="fragment">
        `yt` is written largely in Python and Cython, and was originally designed to read strangely-formatted data from adaptive mesh refinement simulations generated by the code Enzo.
    </p>
  </div>
</div>

---

## What does it do?

<p class="">
   `yt` reads data from around O(several dozen) different data formats, regularizes them into a memory model, and then applies semantics to it.
</p>

```bash
$ h5ls galaxy0030/galaxy0030.cpu0000

Grid00000001             Group
Grid00000075             Group
Grid00000076             Group
Grid00000082             Group
Grid00000110             Group
Metadata                 Group
```

---

## Data Model

The data is indexed, read in as requested, and accessed with respect to *physical* coordinates, rather than computationally-oriented systems.

```python
import yt
ds = yt.load("galaxy0030/galaxy0030")
ds.r[:, :, :].max("density")
ds.r[ (10, 'kpc'):(30, 'kpc'), :, 0.1:0.9 ].integrate("density")
```

It also makes some visualizations and has lots of astro-specific modules.

---

## Who uses `yt`?

<div class="appearing_row">
  <div class="fragment" data-fragment-index="1"><div class="left_align">
  Mostly...
  </div></div>
  <div class="fragment" data-fragment-index="1"><div class="right_align">
  ...astro simulators
  </div></div>
</div>
<br/>
<br/>
<div class="appearing_row">
  <div class="fragment" data-fragment-index="2"><div class="left_align">
  A bit...
  </div></div>
  <div class="fragment" data-fragment-index="2"><div class="right_align">
  ...material science, geophysics, nuclear engineering folks
  </div></div>
</div>
<br/>
<br/>
<div class="appearing_row">
  <div class="fragment" data-fragment-index="3"><div class="left_align">
  Eensy-weensy amount...
  </div></div>
  <div class="fragment" data-fragment-index="3"><div class="right_align">
  ...other domains
  </div></div>
</div>

---

<!-- .slide: style="height: 100%;" -->

## Who develops `yt`?

<div class="fig-container" data-file="figures/yt_repo.html" data-preload data-style="height: 768px;">
</div>

---

## How do we measure usage?

<div class="fig-container" data-file="figures/yt_citations.html" data-preload data-style="height: 768px;">
</div>

---

## Issues with Measurement

Instrument papers are reasonably hard to write well, and they require a lot of buy-in.

<p class="fragment">
I've been working on one about yt-3.0 that will probably get out around the time we release yt-4.0.
</p>

---

## Things I thought I knew

[placeholder for hopefully-not-too-long discussion of Matt's previous
confidence and the intervening years of behumblement]

---

## Things I have learned

My experience is absolutely **not** transferrable, and I need to stop pretending like it is.

---

## Things I have learned

"Being right," about subjective topics, is a fluid concept and it is wrong to
place too much stock into it.

---

## Things I have learned

There is always more to learn.

I would particularly highlight some folks in the room such as Kelle, Dan,
Arfon, Frank and Alice, and those are just the first five I can think of.

---

## Things I have learned

The way I approached "community building" was (in broad strokes, if not in
detail) inescapably influenced by colonialism and perceived exceptionalism.

---

## Things I have learned

Money doesn't fix everything.

---

## Things I have learned

"Bus factor" does not change monotonically.

---

## Things I have learned

Asking or encouraging people to develop software is not and cannot be
value-neutral.

What are the implicit burdens placed on someone when you suggest they
contribute to an open source project?  What relationship with their own agency
do you want to have?

---

## Funding?

`yt` has directly received three (four-ish?) primary grants, all from the NSF.

It has also received indirect support, specifically in the form of a Gordon and Betty Moore Foundation award in the Data Driven-Discovery Investigator program as well as from a number of "science" grants.

---

## NSF Funding: 2011-2013

 * [NSF OCI-1048505](https://www.nsf.gov/awardsearch/showAward?AWD_ID=1048505&HistoricalAwards=false) CI TraCS postdoctoral fellowship (Turk) for developing `yt` specifically for astrophysical simulations.
 * [NSF ACI-1339624](https://www.nsf.gov/awardsearch/showAward?AWD_ID=1339624&HistoricalAwards=false) ([proposal](https://figshare.com/articles/SI2_SSE_yt_Reusable_Components_for_Simulating_Analyzing_and_Visualizing_Astrophysical_Systems/909413)) SI2-SSE to extend `yt` along what eventually became the yt-3.0 and yt-4.0 directions.
 * [NSF OAC-1663914](https://www.nsf.gov/awardsearch/showAward?AWD_ID=1663914&HistoricalAwards=false) ([proposal](https://figshare.com/articles/SI2-SSI_Inquiry-Focused_Volumetric_Data_Analysis_Across_Scientific_Domains_Sustaining_and_Expanding_the_yt_Community/2061465)) SI2-SSI to extend `yt` to other communities, specifically those in oceanography, material science, geophysics, and others.  Collaborative with Wisconsin and Columbia.

---

## 10, 20, 40 years?

Three things are immediately obvious as disrupting factors:

<ul>
<li class="fragment">Expressive power of programming languages and software</li>
<li class="fragment">Maintainability of programming paradigms</li>
<li class="fragment">Convergence of industry with research interests</li>
</ul>

---

## 10, 20, 40 years?

<p class="fragment">
How many refactorings do we have left in us?
</p>

<p class="fragment">
Will it just become easier, someday, to write your own yt with newer libraries?
</p>

<p class="fragment">
Will this proliferation of simulation codes subside?
</p>

---

## Academic Identity

 > "As human beings, our job in life is to help people realize how rare and
 > valuable each one of us really is, that each of us has something that no one
 > else has--or ever will have--something inside that is unique to all time. It's
 > our job to encourage each other to discover that uniqueness and to provide
 > ways of developing its expression."

 <p style="text-align:right;">-- Fred Rogers</p>

If our academic identity becomes unified with our software products, what does
that mean when those products are no longer in use?

---

## Sustainability

What does it mean to create "new" features, or to "maintain" existing ones?

Greg Wilson once asked, at a software sustainability discussion meeting, how do
we know when a project should die?

---

## The End

Thanks for letting me talk to you today.
